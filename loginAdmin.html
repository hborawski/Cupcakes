<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
	<link href="css/bootstrap-responsive.css" rel="stylesheet" type="text/css">
	<title>Login</title>
	<style type="text/css">
	/* Override some defaults */
	html, body {
		background-color: #eee;
	}
	body {
		padding-top: 40px; 
	}
	.container {
		width: 300px;
	}

	/* The white background content wrapper */
	.container > .content {
		background-color: #fff;
		padding: 20px;
		margin: 0 -20px; 
		-webkit-border-radius: 10px 10px 10px 10px;
		-moz-border-radius: 10px 10px 10px 10px;
		border-radius: 10px 10px 10px 10px;
		-webkit-box-shadow: 0 1px 2px rgba(0,0,0,.15);
		-moz-box-shadow: 0 1px 2px rgba(0,0,0,.15);
		box-shadow: 0 1px 2px rgba(0,0,0,.15);
	}

	.login-form {
		margin-left: 65px;
	}
	
	legend {
		margin-right: -50px;
		font-weight: bold;
		color: #404040;
	}
	</style>
</head>
<body>
	<div class="container-fluid">
		<div class="container">
			<div class="content">
				<div class="row">
					<div class="login-form">
						<h2>
							Login
						</h2>
						<fieldset>
							<div class="clearfix">
								<input id="email" type="email" name="email" placeholder="aaa####@rit.edu" autofocus="autofocus" required>
							</div>
							<div class="clearfix">
								<input id="password" type="password" name="password" placeholder="Password" required>
							</div>
							<button class="btn btn-primary" onclick="validLogin()" type="submit">
								Sign in
							</button>
						</fieldset>
					</div>
				</div>
			</div>
		</div>
		<div class="row-fluid">
			<div id="alert-placeholder" style="margin-top: 15px;"></div>
		</div>
	</div>
	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script type="text/javascript">
	function validLogin(){
		var email = $('#email').val();
		var password = $('#password').val();
		var dataString = 'email=' + email + '&password=' + password + '&type=1';
		$.ajax({
			type: "POST",
			url: "check.php",
			data: dataString,
			cache: false,
			success: function(result) {
				var result = trim(result);
				$("#flash").hide();
				console.log(result);
				if (result == 'correct') {
					window.location = '/management.html';
				} else {
					bootstrap_alert.warning('<strong>Hey!</strong> Check your username and password!');
				}
			}
		});
	}
	
	function trim(str){
		var str=str.replace(/^\s+|\s+$/,'');
		return str;
	}
	
	bootstrap_alert = function() {}
	bootstrap_alert.warning = function(message) {
		var password = document.getElementById("password");
		password.value = "";
		password.focus();
		$('#alert-placeholder').html('<div class="span4 offset4 alert alert-error fade in" style="margin-bottom: 0px;"><a class="close" data-dismiss="alert">Ã—</a><span>'+ message +'</span></div>')
	}
	</script>
</body>
</html>